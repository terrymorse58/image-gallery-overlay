{"version":3,"sources":["webpack://OLCarousel/webpack/bootstrap","webpack://OLCarousel/./CSSEditableProps.js","webpack://OLCarousel/./CSSTemplate.js","webpack://OLCarousel/./HTMLTemplate.js","webpack://OLCarousel/./carousel.js"],"names":["CSSEditableProps","fontFamily","headerPadding","headerParagraphMargin","footerPadding","thumbnailBtnPadding","thumbnailBtnMargin","thumbnailImgHeight","thumbnailImgHoverFilter","thumbnailBorder","thumbnailImgSelectedBorder","thumbnailSelectedOpacity","thumbnailSelectedFilter","CSSTemplate","HTMLTemplate","OverlayCarousel","userEditsToCSSProps","editableCSSProps","JSON","parse","stringify","styleSheet","slice","cModalContainer","carouselModal","modalBackdrop","modalDialog","modalContent","modalHeader","pHeader","closeButton","modalBody","carouselContainer","imgHero","imgOverlay","overlayDiv","thumbnailsViewport","firstThumbnail","thumbnailImages","modalFooter","modalIsShowing","_initOverlayState","inTransition","imgSrc","imgAlt","imgTitle","imgIndex","timeoutID","_overlayState","_hasSmoothScrolling","el","getComputedStyle","scrollBehavior","_applyUserEditsToCSSProps","Object","entries","propName","value","_applyCSSPropsToStyleSheet","searchStr","subStr","replace","_appendHTMLTemplateToBody","div","document","createElement","id","innerHTML","body","appendChild","getElementById","querySelector","addEventListener","_completeImageFade","heroIndex","Number","dataset","index","thumbSelected","_updateThumbnailsSelectedClass","_scrollThumbnailsViewport","_appendStyleSheetToHead","style","head","_displaySelectedImage","thumbnailImg","animate","clearTimeout","assign","src","alt","title","changeEvt","Event","dispatchEvent","classList","add","thisIndex","setTimeout","length","String","remove","_listenForEnterKeyOverButton","e","key","elem","target","tagName","btnImg","firstChild","click","_listenForThumbnailImageClicks","evt","elClicked","isThumbnailImg","_hideModal","display","once","_listenForHideModalEvents","thumbnails","carouselIndex","cIndex","forEach","img","thumbIndex","_vpScrollJavaScript","scrollDest","timeStep","timeTotal","stepsTotal","Math","round","scrollStart","scrollLeft","scrollTotal","scrollStep","time","scroll","_scrollRecursive","viewportWidth","scrollWidth","vpStyle","vpPaddingLeft","parseFloat","paddingLeft","windowWidth","clientWidth","scrollMax","tnParent","parentElement","tnStyle","tnWidth","offsetWidth","marginLeft","marginRight","thumbnailCenterOffset","offsetLeft","newScrollLeft","populate","name","hrefs","titles","hrefsCount","completed","Promise","resolve","reject","displaySave","imagesLoaded","aspectRatioMin","Infinity","_evalLoadedImage","imgAspectRatio","height","width","aspectRatio","paddingBottom","contentAspectRatio","offsetHeight","maxWidth","map","href","btnThumb","imgThumb","onload","hasMultipleImages","errmsg","show","console","error","_init"],"mappings":"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","file":"carousel.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./carousel.js\");\n","// editable css props for carousel modal\n\nconst CSSEditableProps = {\n  fontFamily: '-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"',\n  headerPadding: '0.25rem 1rem',\n  headerParagraphMargin: '0',\n  footerPadding: '0 1rem',\n  thumbnailBtnPadding: '0',\n  thumbnailBtnMargin: '0 4px', /* must be in 'px' units */\n  thumbnailImgHeight: '60px',\n  thumbnailImgHoverFilter: 'brightness(70%) contrast(150%)',\n  thumbnailBorder: 'none',\n  thumbnailImgSelectedBorder: '1px solid #888',\n  thumbnailSelectedOpacity: '60%',\n  thumbnailSelectedFilter: 'grayscale(100%) blur(1px)'\n};\n\nexport default CSSEditableProps;\n","// css template for carousel modal\n\nconst CSSTemplate = `\n    /* general */\n    #carousel-modal-container {\n      font-family: {{fontFamily}};\n    }\n\n    /* .cmodal */\n    #carousel-modal-container .cmodal {\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: 1050;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      outline: 0;\n      pointer-events: none;\n    }\n    .cmodal-open #carousel-modal-container .cmodal {\n      overflow-x: hidden;\n      overflow-y: auto;\n    }\n    \n    /* .cmodal-dialog */\n    #carousel-modal-container .cmodal .cmodal-dialog {\n      position: relative;\n      width: auto;\n      margin: 0 auto;\n      pointer-events: none;\n      display: flex;\n      align-items: center;\n      min-height: calc(100% - 1rem);\n      opacity: 0;\n      transform: scale(0.95);\n      transition: all .75s ease;\n    }\n    #carousel-modal-container .cmodal.show .cmodal-dialog {\n     opacity: 1;\n     transform: scale(1.0);\n    }\n    @media (max-width: 475px) {\n      #carousel-modal-container .cmodal.show .cmodal-dialog {\n        max-width: 92vw !important;\n      }\n    }\n    \n    /* .cmodal-content */\n    #carousel-modal-container .cmodal-content {\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      pointer-events: auto;\n      background-color: #fff;\n      background-clip: padding-box;\n      border: 1px solid rgba(0,0,0,.2);\n      border-radius: 0.3rem;\n      outline: 0;\n    }\n    \n    /* .cmodal-header */\n    #carousel-modal-container .cmodal-header {\n      display: flex;\n      align-items: flex-start;\n      justify-content: space-between;\n      padding: {{headerPadding}};\n      border-bottom: 1px solid #dee2e6;\n      border-top-left-radius: calc(.3rem - 1px);\n      border-top-right-radius: calc(.3rem - 1px);\n    }\n    #carousel-modal-container .cmodal-header p {\n      margin: {{headerParagraphMargin}};\n    }\n    \n    /* .cmodal-body */\n    #carousel-modal-container .cmodal-body {\n      position: relative;\n      flex: 1 1 auto;\n      padding: 1rem;\n    }\n    \n    /* carousel */\n    #carousel-modal-container .carousel-container {\n      margin: 0;\n      position: relative;\n      width: 100%;\n     }\n     #carousel-modal-container .carousel-overlay-div {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: white;\n      opacity: 0;\n      pointer-events: none;\n      transition: opacity 0.1s;\n     }\n     #carousel-modal-container .carousel-hero {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: auto;\n     }\n     #carousel-modal-container .carousel-overlay {\n       position: absolute;\n       top: 0;\n       left: 0;\n       width: 100%;\n       height: auto;\n     }\n     #carousel-modal-container .carousel-fade-in {\n       opacity: 1;\n       transition: opacity .75s ease;\n     }\n    \n    /* cmodal-footer */\n    #carousel-modal-container .cmodal-footer {\n      display: flex;\n      flex-wrap: wrap;\n      align-items: center;\n      justify-content: flex-end;\n      padding: {{footerPadding}};\n      border-top: 1px solid #dee2e6;\n      border-bottom-right-radius: calc(.3rem - 1px);\n      border-bottom-left-radius: calc(.3rem - 1px);\n    }\n    #carousel-modal-container .div-thumbnails {\n      overflow-x: auto;\n      white-space: nowrap;\n      margin: 0;\n      padding: 8px 16px 12px 16px; /* padding must be 'px' */\n      background-color: transparent;\n      scroll-behavior: smooth;\n    }\n    #carousel-modal-container .div-thumbnails button {\n      padding: {{thumbnailBtnPadding}};\n      margin: {{thumbnailBtnMargin}};\n      background-color: transparent;\n      border: none;\n    }\n    #carousel-modal-container .div-thumbnails img {\n      height: {{thumbnailImgHeight}};\n      width: auto;\n      margin: 0;\n      border: {{thumbnailBorder}};\n    }\n    #carousel-modal-container .div-thumbnails img:hover {\n      filter: {{thumbnailImgHoverFilter}};\n    }\n    #carousel-modal-container .div-thumbnails img.selected {\n      cursor: default;\n      border: {{thumbnailImgSelectedBorder}};\n      opacity: {{thumbnailSelectedOpacity}};\n      filter: {{thumbnailSelectedFilter}};\n    }\n    \n    /* close button */\n    #carousel-modal-container button.close {\n      float: right;\n      font-size: 1.5rem;\n      font-weight: 700;\n      line-height: 1;\n      color: #000;\n      text-shadow: 0 1px 0 #fff;\n      padding: 1rem;\n      margin: -1rem -1rem -1rem auto;;\n      background-color: transparent;\n      border: 0;\n      opacity: .5;\n    }\n    #carousel-modal-container button.close:hover {\n      opacity: .8;\n    }\n    \n    /* cmodal-backdrop */\n    .cmodal-backdrop {\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: 1040;\n      width: 100vw;\n      height: 100vh;\n      background-color: #000;\n      transition: opacity .3s linear;\n      opacity: 0;\n    }\n    .cmodal-backdrop.show {\n      opacity: 0.5;\n    }\n    \n    /* .cmodal-open */\n    .cmodal-open {\n      overflow: hidden;\n    }\n    \n    cmodal-open cmodal {\n      overflow-x: hidden;\n      overflow-y: auto;\n    }\n`;\n\nexport default CSSTemplate;\n","// HTML template for carousel modal - a Bootstrap modal with an image carousel\n\nconst HTMLTemplate = `\n  <div\n    tabindex=\"-1\"\n    class=\"cmodal\"\n    data-wrap=\"false\"\n    style=\"display: none\"\n  >\n    <div\n      class=\"cmodal-dialog cmodal-dialog-centered\"\n      style=\"max-width: calc(-2rem + 58vh)\"\n    >\n      <div class=\"cmodal-content\">\n      \n        <div class=\"cmodal-header\">\n          <p><!-- name of product --></p>\n          <button type=\"button\"\n            aria-label=\"Close\"\n            class=\"close\"\n          >\n            <span aria-hidden=\"true\">×</span>\n          </button>\n        </div> <!-- /.cmodal-header -->\n        \n        <div class=\"cmodal-body\">\n          <div\n            class=\"carousel-container\"\n            data-aspect-ratio=\"0.6666667\"\n            style=\"padding-bottom: 150%\"\n          >\n            <img\n              class=\"carousel-hero\"\n              src=\"\"\n              alt=\"carousel hero\">\n            <!-- .carousel-overlay-div -->\n            <div\n              class=\"carousel-overlay-div\"\n            >\n              <img\n                class=\"carousel-overlay\"\n                alt=\"carousel overlay\"\n                src=\"\"\n              >\n            </div> <!-- /.carousel-overlay-div -->\n          </div> <!-- /.carousel-container -->\n        </div> <!-- /.cmodal-body -->\n\n        <div class=\"cmodal-footer\">\n          <div class=\"div-thumbnails\"></div>\n        </div> <!-- /.cmodal-footer -->\n        \n      </div> <!-- /.cmodal-content -->\n    </div> <!-- /.cmodal-dialog -->\n  </div> <!-- /.cmodal -->\n  <div class=\"cmodal-backdrop\" style=\"display: none\"></div>\n`;\n\nexport default HTMLTemplate;\n","// carousel overlay modal with thumbnails\nimport CSSTemplate from './CSSTemplate.js';\nimport CSSEditableProps from './CSSEditableProps.js';\nimport HTMLTemplate from './HTMLTemplate.js';\n\nfunction OverlayCarousel (userEditsToCSSProps) {\n\n  // make copies of templates\n  const editableCSSProps = JSON.parse(JSON.stringify(CSSEditableProps));\n  let styleSheet = CSSTemplate.slice(0);\n\n  let cModalContainer,\n    carouselModal,\n    modalBackdrop,\n    modalDialog,\n    modalContent,\n    modalHeader,\n    pHeader,\n    closeButton,\n    modalBody,\n    carouselContainer,\n    imgHero,\n    imgOverlay,\n    overlayDiv,\n    thumbnailsViewport,\n    firstThumbnail,\n    thumbnailImages = [],\n    modalFooter,\n    modalIsShowing = false;\n\n  // state of the image that fades in over the hero image\n  function _initOverlayState () {\n    return {\n      inTransition: false,\n      imgSrc: \"\",\n      imgAlt: \"\",\n      imgTitle: \"\",\n      imgIndex: null,\n      timeoutID: null\n    };\n  }\n  const _overlayState = _initOverlayState();\n\n  // true if element (and browser) support smooth scrolling\n  const _hasSmoothScrolling = (el) => {\n    return getComputedStyle(el).scrollBehavior === 'smooth';\n  }\n\n  // apply user edits to editable css props\n  function _applyUserEditsToCSSProps () {\n    if (typeof userEditsToCSSProps === 'undefined') { return; }\n    for (const [propName, value] of Object.entries(userEditsToCSSProps)) {\n      if (typeof editableCSSProps[propName] === 'undefined') { continue; }\n      editableCSSProps[propName] = value;\n    }\n  }\n\n  // apply all css props to styleSheet\n  function _applyCSSPropsToStyleSheet () {\n    for (const [propName, value] of Object.entries(editableCSSProps)) {\n      const searchStr = `{{${propName}}}`;\n      const subStr = `${value}`;\n      styleSheet = styleSheet.replace(searchStr, subStr);\n    }\n  }\n\n  // append HTML template to <body>\n  function _appendHTMLTemplateToBody () {\n    const div = document.createElement('div');\n    div.id = \"carousel-modal-container\";\n    div.innerHTML = HTMLTemplate;\n    document.body.appendChild(div);\n\n    cModalContainer = document.getElementById('carousel-modal-container');\n    carouselModal = cModalContainer.querySelector('.cmodal');\n    modalBackdrop = cModalContainer.querySelector('.cmodal-backdrop');\n    modalDialog = carouselModal.querySelector('.cmodal-dialog');\n    modalContent = modalDialog.querySelector('.cmodal-content');\n    modalHeader = modalDialog.querySelector('.cmodal-header');\n    pHeader = modalHeader.querySelector('p');\n    closeButton = modalHeader.querySelector('button.close');\n    modalBody = modalDialog.querySelector('.cmodal-body');\n    carouselContainer = modalBody.querySelector('.carousel-container');\n    imgHero = carouselContainer.querySelector('.carousel-hero');\n    overlayDiv = carouselContainer.querySelector('.carousel-overlay-div');\n    imgOverlay = overlayDiv.querySelector('.carousel-overlay');\n    modalFooter = modalDialog.querySelector('.cmodal-footer');\n    thumbnailsViewport = modalFooter.querySelector('.div-thumbnails');\n\n\n    // set up the overlay fader\n    overlayDiv.addEventListener('transitionend', _completeImageFade);\n\n    // react to hero image changes\n    imgHero.addEventListener('change', () => {\n      const heroIndex = Number(imgHero.dataset.index);\n\n      // set (unset) the `selected` class for each thumbnail image\n      const thumbSelected = _updateThumbnailsSelectedClass(\n        thumbnailImages, heroIndex);\n\n      // scroll the thumbnails container horizontally\n      _scrollThumbnailsViewport(thumbSelected);\n    });\n  }\n\n  // append style sheet to <head>\n  function _appendStyleSheetToHead () {\n    const style = document.createElement('style');\n    style.innerHTML = styleSheet;\n    style.id = 'carousel-style';\n    document.head.appendChild(style);\n  }\n\n  /**\n   * display in hero image the selected thumbnail image\n   * @param {HTMLImageElement} thumbnailImg\n   * @param {boolean} animate - animate the hero image transition\n   */\n  function _displaySelectedImage (\n    thumbnailImg,\n    animate = true)\n  {\n    // console.log(`_displaySelectedImage()\n    // thumbnailImg: ${JSON.stringify(thumbnailImg)}\n    // animate=${animate})\n    // _overlayState: ${JSON.stringify(_overlayState,null,2)}`);\n\n    // clear prior overlay timeout, if one exists\n    if (_overlayState.timeoutID !== null) {\n      // console.log('    clearing prior timeout');\n      clearTimeout(_overlayState.timeoutID);\n      _overlayState.timeoutID = null;\n    }\n\n    // set overlay state for the selected thumbnail\n    Object.assign(_overlayState, {\n      imgSrc: thumbnailImg.src,\n      imgAlt: thumbnailImg.alt,\n      imgTitle: thumbnailImg.title,\n      imgIndex: Number(thumbnailImg.dataset.index)\n    });\n\n    // dispatch 'change' event to hero image, which will update thumbnails\n    imgHero.dataset.index = thumbnailImg.dataset.index;\n    const changeEvt = new Event('change');\n    imgHero.dispatchEvent(changeEvt);\n\n    // change the fade-in overlay image\n    imgOverlay.src = _overlayState.imgSrc;\n\n    if (animate === false) {\n      // clean up without animation\n      _completeImageFade();\n      return;\n    }\n\n    // fade in overlay\n    // console.log('_displaySelectedImage fading in overlay');\n    _overlayState.inTransition = true;\n    overlayDiv.classList.add('carousel-fade-in');\n\n    // add timeout in case 'transitionend' event is never received\n    const thisIndex = _overlayState.imgIndex;\n    _overlayState.timeoutID = setTimeout(() => {\n      if (_overlayState.inTransition === false) { return; }\n      if (_overlayState.imgIndex !== thisIndex) { return; }\n      // console.log(`transitionend timeout for index ${thisIndex}, call _completeImageFade()`);\n      _completeImageFade();\n    }, 1500);\n  }\n\n  // clean up display elements when image fade transition completes\n  function _completeImageFade () {\n    // console.log('_completeImageFade() _overlayState.inTransition:', _overlayState.inTransition);\n    // console.log(`    imgOverlay.src: \"${imgOverlay.src}\"`);\n\n    _overlayState.inTransition = false;\n\n    // update hero image\n    if (_overlayState.imgSrc.length > 0) {\n      Object.assign(imgHero, {\n        src: _overlayState.imgSrc,\n        alt: _overlayState.imgAlt,\n        title: _overlayState.imgTitle\n      });\n      imgHero.dataset.index = String(_overlayState.imgIndex);\n    }\n\n    // clear overlay state\n    Object.assign(_overlayState, _initOverlayState());\n\n    // // skip the overlay clean up when not necessary\n    // const hasFadeInClass = (el) => el.classList.contains('carousel-fade-in');\n    // if (hasFadeInClass(overlayDiv) === false) {\n    //   return;\n    // }\n\n    // clean up overlay\n    if (_overlayState.inTransition) { return; }\n    overlayDiv.classList.remove('carousel-fade-in');\n  }\n\n  // upon enter key press over thumbnail button, emit click on thumbnail image\n  function _listenForEnterKeyOverButton () {\n    thumbnailsViewport.addEventListener('keydown', (e) => {\n      if (e.key !== 'Enter') { return; }\n      const elem = e.target;\n      if (elem.tagName !== 'BUTTON') { return; }\n      const btnImg = elem.firstChild;\n      if (!btnImg || btnImg.tagName !== 'IMG') { return; }\n      btnImg.click();\n    });\n  }\n\n  // respond to clicks on thumbnail images\n  function _listenForThumbnailImageClicks () {\n    thumbnailsViewport.addEventListener('click', (evt) => {\n      const elClicked = evt.target;\n      const isThumbnailImg = (el) => el.tagName === 'IMG'\n        && typeof el.dataset.index !== 'undefined';\n      if (isThumbnailImg(elClicked) === false) { return; }\n      _displaySelectedImage(elClicked);\n    });\n  }\n\n  function _hideModal () {\n    // console.log('_hideModal()');\n\n    if (modalIsShowing === false) { return; }\n    modalIsShowing = false;\n\n    modalBackdrop.addEventListener('transitionend', () => {\n        modalBackdrop.style.display = 'none';\n      }, { once: true }\n    );\n    carouselModal.addEventListener('transitionend', () => {\n        carouselModal.style.display = 'none';\n      }, { once: true }\n    );\n\n    modalBackdrop.classList.remove('show');\n    carouselModal.classList.remove('show');\n    document.body.classList.remove('cmodal-open');\n  }\n\n  // respond to events intended to hide modal\n  function _listenForHideModalEvents () {\n\n    // click on modal close button\n    closeButton.addEventListener('click', (evt) => {\n      // console.log('close button click');\n      _hideModal();\n    });\n\n    // click on modal backdrop\n    modalBackdrop.addEventListener('click', () => {\n      // console.log('modalBackdrop click');\n      _hideModal();\n    });\n\n    // ESC key pressed anywhere\n    document.addEventListener('keyup', evt => {\n      if (evt.key === 'Escape') {\n        // console.log('ESC key pressed');\n        _hideModal();\n      }\n    });\n  }\n\n  // update the \"selected\" class of each thumbnail image\n  function _updateThumbnailsSelectedClass (thumbnails, carouselIndex) {\n    const cIndex = Number(carouselIndex);\n    let thumbSelected = null;\n    thumbnails.forEach(img => {\n      const thumbIndex = +(img.dataset.index);\n      if (thumbIndex === cIndex) {\n        thumbSelected = img;\n        thumbSelected.classList.add('selected');\n        return;\n      }\n      img.classList.remove('selected');\n    });\n    return thumbSelected;\n  }\n\n  // scroll viewport using vanilla JavaScript\n  // (use on browsers like Safari that don't support smooth scrolling)\n  function _vpScrollJavaScript (scrollDest) {\n    // simulate scroll feature with vanilla JavaScript\n    const timeStep = 20;\n    const timeTotal = 400;\n    const stepsTotal = Math.round(timeTotal/timeStep);\n    const scrollStart = thumbnailsViewport.scrollLeft;\n    const scrollTotal = scrollDest - scrollStart;\n    const scrollStep = Math.round(scrollTotal/stepsTotal);\n    let time = timeStep, scroll = scrollStart + scrollStep;\n\n    const _scrollRecursive = () => {\n      if (time >= timeTotal) {\n        thumbnailsViewport.scrollLeft = scrollDest;\n        return;\n      }\n      thumbnailsViewport.scrollLeft = scroll;\n      time += timeStep;\n      scroll += scrollStep;\n      setTimeout(_scrollRecursive, timeStep);\n    }\n\n    if (scrollTotal !== 0) { _scrollRecursive(); }\n  }\n\n  /**\n   * scroll thumbnails viewport to show `thumbnailImg` in center of window\n   * @param {HTMLImageElement} thumbnailImg - thumbnail's img element\n   */\n  function _scrollThumbnailsViewport (thumbnailImg) {\n    if (!thumbnailImg) { return; }\n    const viewportWidth = thumbnailsViewport.scrollWidth;\n    const vpStyle = getComputedStyle(thumbnailsViewport);\n    const vpPaddingLeft = parseFloat(vpStyle.paddingLeft);\n    const windowWidth = thumbnailsViewport.clientWidth;\n    const scrollMax = viewportWidth - windowWidth;\n    const tnParent = thumbnailImg.parentElement; // thumbnailImg parent is button\n    const tnStyle = getComputedStyle(tnParent);\n    const tnWidth = tnParent.offsetWidth\n      + parseFloat(tnStyle.marginLeft) + parseFloat(tnStyle.marginRight);\n    const thumbnailCenterOffset = tnParent.offsetLeft\n      + (tnParent.offsetWidth / 2);\n\n    // console.log(`    viewportWidth: ${thumbnailsViewport.scrollWidth}\n    // vpPaddingLeft: ${vpPaddingLeft}\n    // windowWidth: ${windowWidth}\n    // scrollMax: ${scrollMax}\n    // tnParent.offsetLeft: ${tnParent.offsetLeft}\n    // tnParent.offsetWidth: ${tnParent.offsetWidth}\n    // tnWidth: ${tnWidth}\n    // thumbnailCenterOffset: ${thumbnailCenterOffset}`);\n\n    // scroll viewport to position thumbnail in center of viewport window\n    let newScrollLeft = thumbnailCenterOffset\n      - Math.round((windowWidth+tnWidth) / 2) + vpPaddingLeft;\n    if (newScrollLeft < 0) { newScrollLeft = 0; }\n    if (newScrollLeft > scrollMax) { newScrollLeft = scrollMax; }\n\n    // console.log(`  newScrollLeft: ${newScrollLeft}`);\n\n    if (_hasSmoothScrolling(thumbnailsViewport)) {\n      // console.log('scrolling with Element.scrollLeft = newScrollLeft');\n      thumbnailsViewport.scrollLeft = newScrollLeft;\n    } else {\n      _vpScrollJavaScript(newScrollLeft);\n    }\n\n    // console.log(`after scrollLeft: ${thumbnailsViewport.scrollLeft}`);\n  }\n\n  /**\n   * populate overlay with name, carousel and thumbnail images\n   * @param name\n   * @param hrefs\n   * @param titles\n   * @return {Promise<unknown>}\n   */\n  function populate (name, hrefs, titles = null) {\n    // console.log(`populate()`);\n    const hrefsCount = hrefs.length;\n    let completed = false;\n\n    return new Promise(function (resolve, reject) {\n\n      // display the modal (invisibly) to obtain its dimensions\n      const displaySave = carouselModal.style.display;\n      carouselModal.style.display = 'block';\n\n      pHeader.innerHTML = name;\n\n      // detect aspect ratio of image when it receives a 'load' event\n      let imagesLoaded = 0;\n      let aspectRatioMin = Infinity;\n\n      // evaluate each image onload\n      function _evalLoadedImage () {\n        const img = this;\n        const imgAspectRatio = (img.height > 0) ? img.width / img.height : null;\n\n        imagesLoaded++;\n        if (imgAspectRatio === null) { return; }\n\n        img.dataset.aspectRatio = String(imgAspectRatio);\n        aspectRatioMin = (imgAspectRatio < aspectRatioMin) ?\n          imgAspectRatio : aspectRatioMin;\n\n        // console.log(`_evalLoadedImage index: ${img.dataset.index}, imgAspectRatio: ${imgAspectRatio}, min: ${aspectRatioMin}`);\n\n        if (imagesLoaded < hrefsCount) { return; }\n        if (aspectRatioMin === Infinity) { return; }\n\n        // all images loaded: set the padding-bottom of container to match aspect\n        // ratio\n        carouselContainer.style.paddingBottom = Math.round(\n          1.0 / aspectRatioMin * 100\n        ) + '%';\n        carouselContainer.dataset.aspectRatio = String(aspectRatioMin);\n\n        const contentAspectRatio =\n          modalContent.offsetWidth / modalContent.offsetHeight;\n        modalDialog.style.maxWidth = `calc(-30px + ${\n          Math.round(contentAspectRatio * 100)\n        }vh)`;\n\n        // restore the modal's display state\n        carouselModal.style.display = displaySave;\n\n        // all images loaded, mark as completed and resolve the promise\n        completed = true;\n        resolve();\n      }\n\n      // populate the thumbnails\n      thumbnailsViewport.innerHTML = '';\n      thumbnailImages = hrefs.map((href, index) => {\n        const btnThumb = document.createElement('button');\n        thumbnailsViewport.appendChild(btnThumb);\n\n        const imgThumb = document.createElement('img');\n        imgThumb.onload = _evalLoadedImage;\n        imgThumb.dataset.index = String(index);\n        imgThumb.src = href;\n        if (titles !== null) {\n          imgThumb.alt = imgThumb.title = titles[index];\n        }\n        btnThumb.appendChild(imgThumb);\n\n        return imgThumb;\n      });\n      firstThumbnail = thumbnailsViewport.querySelector('img');\n\n      // show thumbnails when there are multiple images\n      const hasMultipleImages = hrefsCount > 1;\n      modalFooter.style.display = hasMultipleImages ? '' : 'none';\n\n      // set a timeout in case images don't load\n      setTimeout(() => {\n        if (completed) { return; }\n        // reject with an error message\n        const errmsg = `unable to load some images, expected ${hrefsCount}` +\n          `, loaded ${imagesLoaded}`;\n        reject(errmsg);\n      }, 2000);\n\n    });\n  }\n\n  // show the carousel modal\n  function show () {\n\n    // console.log('show()');\n\n    if (modalIsShowing) { return; }\n\n    // make the display changes *before* showing the modal\n    if (firstThumbnail === null) {\n      console.error('no thumbnail images found');\n      return;\n    }\n    _displaySelectedImage(firstThumbnail, false);\n\n\n    // wait for backdrop to complete before showing modal\n    // modalBackdrop.addEventListener('transitionend', () => {\n    //     carouselModal.classList.add('show');\n    //     document.body.classList.add('cmodal-open');\n    //     modalIsShowing = true;\n    //   }, { once: true }\n    // );\n\n    modalBackdrop.style.display = 'block';\n    carouselModal.style.display = 'block';\n\n    setTimeout(() => {\n      carouselModal.classList.add('show');\n      modalBackdrop.classList.add('show');\n      document.body.classList.add('cmodal-open');\n      modalIsShowing = true;\n    }, 200);\n  }\n\n\n  function _init () {\n    _applyUserEditsToCSSProps();\n    _applyCSSPropsToStyleSheet();\n    _appendStyleSheetToHead();\n    _appendHTMLTemplateToBody();\n    _listenForThumbnailImageClicks();\n    _listenForEnterKeyOverButton();\n    _listenForHideModalEvents();\n  }\n\n  // initialize\n  _init();\n\n  return {\n    populate,\n    show\n  };\n\n}\n\nexport default OverlayCarousel;\n"],"sourceRoot":""}